# Абстрактная фабрика
Абстрактная фабрика - это порождающий паттерн
проектирования, который позволяет создавать семейства связанных
объектов, не привязываясь к конкретным классам
создаваемых объектов.
## Проблема
Представим, что пишем симулятор мебельного магазина. Наш код состоит из:
1. Семейства зависимых продуктов. Например, Кресло + Диван + Стол.
2. Нескольких вариаций данного семейства, т.е. они представлены в разных стилях: Модерн, Викторианский и Ар-Деко.

Нужен такой способ создавать объекты продуктов, чтобы они сочетались с другими из того
же семейства. Также мы хотим, чтобы не пришлось вносить изменения уже в существующий код
при добавлении новых продуктов или семейств.
## Решение
1. Для начала выделим общий интерфейс для продуктов, которые составляют семейства.
Все вариации кресел будут реализовывать общий интерфейс Кресло и тд.

![](imgs/solution1.png)

2. Далее создаем абстрактную фабрику - общий интерфейс, который содержит методы
создания всех продуктов семейства (создатьКресло и тд). Методы должны возвращать
абстрактные типы продуктов, представленные в интерфейсах, которые выделили на 1 пункте -
Кресло, Диван, Стол.

![](imgs/solution2.png)

Конкретные фабрики соответствуют определенной вариации семейства продуктов.
Например, ФабрикаМодерн вернет КреслаМодерн, ДиваныМодерн и тд.

Клиентский код должен работать с фабриками и продуктами через их общие интерфейсы.
Это позволит подавать в классы любой тип фабрики и производить любые продукты, ничего не ломая.
(например, клиент просит сделать стул, он получит стул рандомного семейства)

## Структура

![](imgs/structure-indexed.png)

1. Абстрактные продукты объявляют интерфейсы продуктов, которые связаны друг с другом
по смыслу, но выполняют разные функции.
2. Конкретные продукты - большой набор классов, которые относятся к различным абстрактным
продуктам (кресло/стол), но имеют одни и те же вариации (Модерн/Викторианский).
3. Абстрактная фабрика объявляет методы создания различных абстрактных продуктов (кресло/стол).
4. Конкретные фабрики относятся каждая к своей вариации продуктов (Модерн/Викторианский) и реализуют
методы абстрактной фабрики, позволяя создавать все продукты определенной варации.
5. Несмотря на то, что конкретные фабрики порождают конкретные продукты, сигнатуры их методов
должны возвращать соответсвующие абстрактные продукты. Это позволит клиентскому коду, который использует
фабрику, не привязываться к конкретным классам продуктов. Клиент сможет работать с любыми вариациями продуктов
через абстрактные интерфейсы.
